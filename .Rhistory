pacman::p_load(sjlabelled,
dplyr, #Manipulacion de datos
stargazer, #Tablas
sjmisc, # Tablas
summarytools, # Tablas
kableExtra, #Tablas
sjPlot, #Tablas y gráficos
corrplot, # Correlaciones
sessioninfo, # Información de la sesión de trabajo
ggplot2) # Para la mayoría de los gráficos
load(url("https://github.com/panchamama/Practico-1/raw/main/1.%20input/CASEN_recod.rdata"))
dim(proc_base)
names(proc_base)
sjmisc::descr(proc_base,
show = c("label","range", "mean", "sd", "NA.prc", "n"))%>%
kable(.,"markdown")
# a) Trabajo la semana pasada
sjt.xtab(proc_base$trbj, proc_base$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
# b) Realizo trabajo de manera informal
sjt.xtab(proc_base$`trbj_no formal`, proc_base$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
# a) Trabajo la semana pasada
sjt.xtab(proc_base$trbj, proc_base$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
# b) Realizo trabajo de manera informal
sjt.xtab(proc_base$`trbj_no formal`, proc_base$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
View(proc_base)
# c) Cuantas horas trabajo a la semana
sjt.xtab(proc_base$horas_trbj, proc_base$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
# d) Jefe de hogar
sjt.xtab(proc_base$jefe_h, proc_base$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
# e) Conformacion de parejas dentro del hogar
sjt.xtab(proc_base$pareja, proc_base$Salario,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
sjt.xtab(proc_base$pareja, proc_base$horas_trbj,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
# f) El padre o la madre viven en la vivienda
sjt.xtab(proc_base$mp_vivienda, proc_base$Salario,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
# g) Razon de la no busqueda de trabjao
sjt.xtab(proc_base$busqueda_trbj, proc_base$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
#|label:fig busqueda_de_trabajo
#|fig-cap:"Plot"
graph1 <- proc_base %>% ggplot(aes(x = busqueda_trbj, fill = sexo)) +
geom_bar() +
xlab("Busqueda de trabajo") +
ylab("Cantidad") +
labs(fill="Sexo")+
scale_fill_discrete(labels = c('Hombre','Mujer'))
graph1
# h) Salario
sjt.xtab(proc_base$Salario, proc_base$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8"
)
graph2 <- proc_base %>% ggplot(aes(x = Salario, fill = sexo)) +
geom_bar() +
xlab("Salario") +
ylab("Cantidad") +
labs(fill="Sexo")+
scale_fill_discrete(labels = c('Hombre','Mujer'))
graph2
rm(list = ls()) # para limpiar el entorno de trabajo
load(url("https://github.com/panchamama/Practico-1/raw/main/1.%20input/CASEN_recodd.rdata"))
View(proc_base)
dim(proc_base)
names(proc_base)
CASEN_mujeres <- proc_base %>% dplyr::filter(sexo == "Mujer" )
CASEN_hombres <- proc_base %>% dplyr::filter(sexo == "Hombre")
CASEN_hombres <- CASEN_hombres %>% select(jefe_h,
pareja,
mp_vivienda,
trbj,
`trbj_no formal`,
horas_trbj,
Salario)  %>%
mutate_all(~(as.numeric(.))) # Convertimos todas las variables a numéricas
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven, summarytools, kableExtra, sjPlot, corrplot, sessioninfo, ggplot2)
# 2. Pasos previos # ----
rm(list = ls()) #limpiar area de trabajo
options(scipen = 999) #desactivar notacion cientifica
# 3. Base de Datos # ----
CASEN <- read_sav("C:/Users/Asus/Desktop/2024 Primer Semestre/Opt. Rstudios/Practico 1/CASEN.sav")
dim(CASEN)
# 4. Seleccion de Variables # ----
proc_base <- CASEN %>% select(edad, # Edad
sexo, # Sexo
e6a_no_asiste, # Nivel educacional mas alto al cual asistio
o1, # Trabajo
o2, # Trabajo informal
o7, # Razon por la cual no busco trabajo
o10, # Horas trabajadas
o12, # Su trabajo es de tipo
o19, # Tipo de contrato
o20, #Jornada laboral
o21, #Tipo de horario
y1, # Sueldo
s5, # Tiene hijos
r1a, # Pais de nacionalidad
r3) # Pertenece a algun pueblo indigena
names(proc_base) #comprobacion
sjlabelled::get_label(proc_base) #atributo de la variable
## 5.1 Participacion en el mercado laboral ## ----
frq(proc_base$o1) #Descriptivo
View(proc_base)
# 4.1 Renombramiento de las variables #
proc_base <- proc_base %>% rename("educ"=e6a_no_asiste, # Nivel educacional
"trabajo"=o1, # Tiene trabajo formal
"trabajo_informal"=o2, # Tiene trabajo informal
"busqueda_trabajo"=o7, # Porque no busco trabajo
"horas_trabajo"=o10, # Horas trabajdas
"tipo_trabajo"=o12, # Que tipo de permanencia tiene en al trabjo
"contrato"=o19, # Tipo de contrato de trabajo
"jornada_labora"=o20, # Jornada laboral
"horaio_trabajo"=o21, # Horario laboral
"sueldo"=y1, # Sueldo
"hijos"=s5, # Tiene hijos
"nacionalidad"=r1a, # Pais de nacionalidad
"pueblo_originario"=r3) # Pertenece a algun pueblo originario
names(proc_base)
# 4.2 Re-etiquetado de las variables #
proc_base$sexo <- set_label(x = proc_base$sexo, label = "Sexo")
get_label(sexo)
get_label(proc_base$sexo)
proc_base$educ <- set_label(x = proc_base$educ, label = "Nivel educacional")
get_label(proc_base$educ)
# 4.2 Re-etiquetado de las variables #
proc_base$sexo <- set_label(x = proc_base$sexo, label = "Sexo")
get_label(proc_base$sexo)
proc_base$edad <- set_label(x = proc_base$edad, label = "Edad")
get_label(proc_base$edad)
proc_base$educ <- set_label(x = proc_base$educ, label = "Nivel educacional")
get_label(proc_base$educ)
proc_base$trabajo <- set_label(x = proc_base$trabajo, label = "Trabajo formal")
get_label(proc_base$sexo)
proc_base$trabajo_informal <- set_label(x = proc_base$trabajo_informal, label = "Trabajo informal")
proc_base$trabajo <- set_label(x = proc_base$trabajo, label = "Trabajo formal")
get_label(proc_base$trabajo)
proc_base$trabajo_informal <- set_label(x = proc_base$trabajo_informal, label = "Trabajo informal")
get_label(proc_base$trabajo_informal)
proc_base$busqueda_trabajo <- set_label(x = proc_base$busqueda_trabajo, label = "Porque no busco trabajo")
get_label(proc_base$busqueda_trabajo)
proc_base$horas_trabajo <- set_label(x = proc_base$horas_trabajo, label = "Horas trabajadas")
get_label(proc_base$horas_trabajo)
proc_base$tipo_trabajo <- set_label(x = proc_base$tipo_trabajo, label = "Tipo de permanencia en el trabajo")
get_label(proc_base$tipo_trabajo)
proc_base$contrato <- set_label(x = proc_base$contrato, label = "Tipo de contrato de trabajo")
get_label(proc_base$contrato)
proc_base$jornada_labora <- set_label(x = proc_base$jornada_labora, label = "Jornada laboral")
get_label(proc_base$jornada_labora)
proc_base$horaio_trabajo <- set_label(x = proc_base$horaio_trabajo, label = "Horario de trabajo")
get_label(proc_base$horaio_trabajo)
proc_base$sueldo <- set_label(x = proc_base$sueldo, label = "Sueldo mensual")
get_label(proc_base$sueldo)
proc_base$hijos <- set_label(x = proc_base$hijos, label = "Tiene hijos")
get_label(proc_base$hijos)
proc_base$nacionalidad <- set_label(x = proc_base$nacionalidad, label = "Pais de nacionalidad")
get_label(proc_base$nacionalidad)
proc_base$pueblo_originario <- set_label(x = proc_base$pueblo_originario, label = "Pertenece a algun pueblo originario")
get_label(proc_base$pueblo_originario)
# 4. Seleccion de Variables # ----
proc_base <- CASEN %>% select(edad, # Edad
sexo, # Sexo
e6a_no_asiste, # Nivel educacional mas alto al cual asistio
o1, # Trabajo
o2, # Trabajo informal
o7, # Razon por la cual no busco trabajo
o10, # Horas trabajadas
o12, # Su trabajo es de tipo
o19, # Tipo de contrato
o20, #Jornada laboral
o21, #Tipo de horario
y1, # Sueldo
s5, # Tiene hijos
r1a, # Pais de nacionalidad
r3) # Pertenece a algun pueblo indigena
names(proc_base) #comprobacion
sjlabelled::get_label(proc_base) #atributo de la variable
# 4.1 Renombramiento de las variables #
proc_base <- proc_base %>% rename("educ"=e6a_no_asiste, # Nivel educacional
"trabajo"=o1, # Tiene trabajo formal
"trabajo_informal"=o2, # Tiene trabajo informal
"busqueda_trabajo"=o7, # Porque no busco trabajo
"horas_trabajo"=o10, # Horas trabajdas
"tipo_trabajo"=o12, # Que tipo de permanencia tiene en al trabjo
"contrato"=o19, # Tipo de contrato de trabajo
"jornada_labora"=o20, # Jornada laboral
"horario_trabajo"=o21, # Horario laboral
"sueldo"=y1, # Sueldo
"hijos"=s5, # Tiene hijos
"nacionalidad"=r1a, # Pais de nacionalidad
"pueblo_originario"=r3) # Pertenece a algun pueblo originario
names(proc_base)
# 4.2 Re-etiquetado de las variables # ----
proc_base$sexo <- set_label(x = proc_base$sexo, label = "Sexo")
# 4.2 Re-etiquetado de las variables # ----
proc_base$sexo <- set_label(x = proc_base$sexo, label = "Sexo")
get_label(proc_base$sexo)
proc_base$edad <- set_label(x = proc_base$edad, label = "Edad")
get_label(proc_base$edad)
proc_base$educ <- set_label(x = proc_base$educ, label = "Nivel educacional")
get_label(proc_base$educ)
proc_base$trabajo <- set_label(x = proc_base$trabajo, label = "Trabajo formal")
get_label(proc_base$trabajo)
proc_base$trabajo_informal <- set_label(x = proc_base$trabajo_informal, label = "Trabajo informal")
get_label(proc_base$trabajo_informal)
proc_base$busqueda_trabajo <- set_label(x = proc_base$busqueda_trabajo, label = "Porque no busco trabajo")
get_label(proc_base$busqueda_trabajo)
proc_base$horas_trabajo <- set_label(x = proc_base$horas_trabajo, label = "Horas trabajadas")
get_label(proc_base$horas_trabajo)
proc_base$tipo_trabajo <- set_label(x = proc_base$tipo_trabajo, label = "Tipo de permanencia en el trabajo")
get_label(proc_base$tipo_trabajo)
proc_base$contrato <- set_label(x = proc_base$contrato, label = "Tipo de contrato de trabajo")
get_label(proc_base$contrato)
proc_base$jornada_labora <- set_label(x = proc_base$jornada_labora, label = "Jornada laboral")
get_label(proc_base$jornada_labora)
proc_base$horario_trabajo <- set_label(x = proc_base$horario_trabajo, label = "Horario de trabajo")
get_label(proc_base$horario_trabajo)
proc_base$sueldo <- set_label(x = proc_base$sueldo, label = "Sueldo mensual")
get_label(proc_base$sueldo)
proc_base$hijos <- set_label(x = proc_base$hijos, label = "Tiene hijos")
get_label(proc_base$hijos)
proc_base$nacionalidad <- set_label(x = proc_base$nacionalidad, label = "Pais de nacionalidad")
get_label(proc_base$nacionalidad)
proc_base$pueblo_originario <- set_label(x = proc_base$pueblo_originario, label = "Pertenece a algun pueblo originario")
get_label(proc_base$pueblo_originario)
# 5. Guardar base de datos # ----
# 5.1 Guardar base de datos para escala #
casen_esca <- proc_base %>% select(proc_base,
trabajo,
trabajo_informal,
horas_trabajo,
tipo_trabajo,
contrato,
jornada_labora,
horario_trabajo,
sueldo)
# 5. Guardar base de datos # ----
# 5.1 Guardar base de datos para escala #
casen_esca <- select(proc_base,
trabajo,
trabajo_informal,
horas_trabajo,
tipo_trabajo,
contrato,
jornada_labora,
horario_trabajo,
sueldo)
View(casen_esca)
# Reformatear objeto#
casen_esca <- as.data.frame(casen_esca)
# Guardar base de datos para la escala #
save(casen_esca, file = "1. input/casen_esca.rdata")
frq(proc_base$edad)
frq(proc_base$sexo)
